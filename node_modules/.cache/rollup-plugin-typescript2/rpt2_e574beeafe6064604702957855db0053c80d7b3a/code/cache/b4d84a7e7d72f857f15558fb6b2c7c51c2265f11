{"code":"import { __awaiter } from \"tslib\";\nimport { Plugin } from \"obsidian\";\nexport default class FullCalendarColorAddon extends Plugin {\n    onload() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log(\"Full Calendar Color Addon loaded\");\n            // Чтение config.json из директории плагина\n            let config = {};\n            try {\n                const raw = yield this.app.vault.adapter.read(`${this.app.vault.configDir}/plugins/${this.manifest.id}/config.json`);\n                config = JSON.parse(raw);\n            }\n            catch (err) {\n                console.error(\"Failed to load color config:\", err);\n                return;\n            }\n            function classifyEvents() {\n                document.querySelectorAll(\"a.fc-timegrid-event\").forEach((el) => {\n                    const titleEl = el.querySelector(\".fc-event-title\");\n                    const title = ((titleEl === null || titleEl === void 0 ? void 0 : titleEl.textContent) || \"\").toLowerCase();\n                    for (const keyword in config) {\n                        if (title.includes(keyword.toLowerCase())) {\n                            const color = config[keyword];\n                            el.setAttribute(\"data-type\", keyword);\n                            el.style.setProperty(\"background-color\", color, \"important\");\n                            el.style.setProperty(\"border-color\", \"white\", \"important\");\n                            break;\n                        }\n                    }\n                });\n            }\n            // Наблюдаем за изменениями DOM календаря\n            const observer = new MutationObserver(classifyEvents);\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true\n            });\n            // Повторная перекраска после отложенной отрисовки\n            let attempts = 0;\n            const interval = setInterval(() => {\n                classifyEvents();\n                if (++attempts > 20)\n                    clearInterval(interval);\n            }, 500);\n        });\n    }\n}\n","references":["C:/obsidian-full-calendar-color-addon/node_modules/obsidian/obsidian.d.ts"]}
